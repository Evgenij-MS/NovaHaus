{% extends 'base.html' %}
{% load static %}

{% block title %}Онлайн-калькулятор – NovaHaus{% endblock %}
{% block description %}Рассчитайте стоимость ремонта или утепления с помощью нашего онлайн-калькулятора.{% endblock %}
{% block keywords %}калькулятор, стоимость ремонта, утепление, NovaHaus{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/calculator.css' %}">
{% endblock %}

{% block content %}
<div class="calculator-container fade-in">
    <h1>Онлайн-калькулятор</h1>
    <form id="calculator-form">
        <!-- Выбор типа работ -->
        <div class="form-group">
            <label for="work-type">Тип работ:</label>
            <select id="work-type" name="work-type" required onchange="updateAreaDescription()">
                <option value="apartment">Ремонт квартир</option>
                <option value="house">Ремонт домов</option>
                <option value="office">Ремонт офисов</option>
                <option value="warehouse">Ремонт складов</option>
                <option value="facade">Фасадные работы</option>
                <option value="insulation">Утепление домов</option>
                <option value="demolition">Демонтажные работы</option>
                <option value="cleaning">Уборка после ремонта</option>
            </select>
        </div>

        <!-- Площадь -->
        <div class="form-group">
            <label for="area">Площадь (м²):</label>
            <input type="number" id="area" name="area" required>
            <p id="area-description" class="hint">Введите общую площадь стен, потолков и пола.</p>
        </div>

        <!-- Тип материала (если применимо) -->
        <div class="form-group" id="material-group">
            <label for="material">Тип материала:</label>
            <select id="material" name="material">
                <option value="economy">Эконом</option>
                <option value="standard">Стандарт</option>
                <option value="premium">Премиум</option>
            </select>
        </div>

        <!-- Включение материалов -->
        <div class="form-group">
            <label for="include-materials">Включить материалы:</label>
            <select id="include-materials" name="include-materials">
                <option value="yes">Да</option>
                <option value="no">Нет</option>
            </select>
        </div>

        <!-- Срочность -->
        <div class="form-group">
            <label for="urgency">Срочность:</label>
            <select id="urgency" name="urgency">
                <option value="normal">Обычная</option>
                <option value="fast">Срочная</option>
            </select>
        </div>

        <!-- Дополнительные услуги -->
        <div class="form-group">
            <label>Дополнительные услуги:</label>
            <div>
                <input type="checkbox" id="cleaning" name="cleaning" value="cleaning">
                <label for="cleaning">Уборка после ремонта</label>
            </div>
            <div>
                <input type="checkbox" id="delivery" name="delivery" value="delivery">
                <label for="delivery">Доставка материалов</label>
            </div>
        </div>

        <!-- Кнопка расчета -->
        <button type="button" onclick="calculateCost()" class="btn">Рассчитать</button>

        <!-- Кнопка сохранения расчета -->
        <button type="button" onclick="saveCalculation()" class="btn btn-secondary">Сохранить расчет</button>

        <!-- Кнопка просмотра истории -->
        <button type="button" onclick="showHistory()" class="btn btn-secondary">История расчетов</button>
    </form>

    <!-- Результат -->
    <p id="result" class="result"></p>

    <!-- График -->
    <canvas id="cost-chart" width="400" height="400"></canvas>

    <!-- Блок рекомендаций от ИИ -->
    <div id="ai-recommendations" class="ai-recommendations">
        <h2>Рекомендации от ИИ</h2>
        <p id="ai-recommendation-text"></p>
    </div>
</div>
{% endblock %}