
{% extends 'base.html' %}
{% load compress static i18n %}

{% block title %}
    {% trans "–ß–∞—Ç-–±–æ—Ç NovaHaus" %}
{% endblock %}

{% block description %}
    {% trans "–û–±—â–∞–π—Ç–µ—Å—å —Å –Ω–∞—à–∏–º —á–∞—Ç-–±–æ—Ç–æ–º –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –ø–æ —Ä–µ–º–æ–Ω—Ç—É –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤—É –≤ –ö—ë–ª—å–Ω–µ –∏ –ì–∞–º–±—É—Ä–≥–µ." %}
{% endblock %}

{% block keywords %}
    {% trans "—á–∞—Ç-–±–æ—Ç, —Ä–µ–º–æ–Ω—Ç, —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è, NovaHaus" %}
{% endblock %}

{% block extra_css %}
    {% compress css %}
    <link rel="stylesheet" href="{% static 'css/chatbot.css' %}">
    {% endcompress %}
{% endblock %}

{% block content %}
<div class="container">
    <h1>{% trans "–ß–∞—Ç-–±–æ—Ç NovaHaus" %}</h1>

    <!-- Bereich f√ºr Fehlermeldungen -->
    {% if messages %}
        <div id="messageContainer" class="alert-container" role="alert" aria-live="assertive">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="chatbot-container">
        <button class="chatbot-close" aria-label="{{ '–ß–∞—Ç –∑–∞–∫—Ä—ã—Ç—å'|trans }}" type="button">√ó</button>

        <div class="chatbot-messages" aria-live="polite" aria-label="{{ '–ß–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è'|trans }}"></div>

        <!-- Ladeanzeige -->
        <div id="loadingIndicator" class="loading-indicator" style="display: none;" aria-live="polite">
            <span>{% trans "–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è..." %}</span>
        </div>

        <form class="chatbot-form" method="post" enctype="multipart/form-data" id="chatbotForm" novalidate>
            {% csrf_token %}

            <!-- Fehlermeldungen f√ºr das Formular -->
            <div id="formErrors" class="form-errors" role="alert" aria-live="assertive" style="display: none;"></div>

            <div class="form-group">
                <label for="chatbot-message" class="form-label">{% trans "–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" %}</label>
                <textarea
                    id="chatbot-message"
                    name="message"
                    class="chatbot-input form-control"
                    placeholder="{{ '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'|trans }}"
                    rows="3"
                    required
                    aria-describedby="message-help"
                    maxlength="1000"></textarea>
                <small id="message-help" class="form-text">{% trans "–ú–∞–∫—Å–∏–º—É–º 1000 —Å–∏–º–≤–æ–ª–æ–≤" %}</small>
            </div>

            <div class="form-group">
                <label for="chatbot-file" class="form-label">{% trans "–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" %}</label>
                <input
                    type="file"
                    id="chatbot-file"
                    name="file"
                    class="form-control-file"
                    accept=".jpg,.jpeg,.png,.pdf"
                    aria-describedby="file-help">
                <small id="file-help" class="form-text">{% trans "–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, PDF. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB" %}</small>
            </div>

            <div class="form-actions">
                <button
                    type="button"
                    class="btn btn-secondary record-button"
                    aria-label="{{ '–ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'|trans }}"
                    title="{{ '–ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'|trans }}">
                    <span aria-hidden="true">üé§</span>
                    <span class="sr-only">{% trans "–ó–∞–ø–∏—Å—å" %}</span>
                </button>

                <button
                    type="submit"
                    class="btn btn-primary send-button"
                    aria-label="{{ '–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ'|trans }}">
                    {% trans "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" %}
                </button>

                <button
                    type="button"
                    class="btn btn-secondary attach-button"
                    aria-label="{{ '–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è'|trans }}"
                    title="{{ '–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª'|trans }}"
                    onclick="document.getElementById('chatbot-file').click();">
                    <span aria-hidden="true">üìé</span>
                    <span class="sr-only">{% trans "–§–∞–π–ª" %}</span>
                </button>
            </div>
        </form>

        <!-- –ö–æ–Ω—Ç—Ä–æ–ª–ª—ã –∑–∞–ø–∏—Å–∏ -->
        <div class="recording-controls" style="display: none;" role="region" aria-label="{{ '–ö–æ–Ω—Ç—Ä–æ–ª–ª—ã –∑–∞–ø–∏—Å–∏'|trans }}">
            <button type="button" class="btn btn-danger stop-recording">
                <span aria-hidden="true">‚èπ</span>
                {% trans "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å" %}
            </button>
            <button type="button" class="btn btn-info play-recording">
                <span aria-hidden="true">‚ñ∂</span>
                {% trans "–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏" %}
            </button>
            <button type="button" class="btn btn-secondary cancel-recording">
                <span aria-hidden="true">‚ùå</span>
                {% trans "–û—Ç–º–µ–Ω–∏—Ç—å" %}
            </button>
        </div>
    </div>
</div>

<!-- √úbersetzungen f√ºr JavaScript -->
<script id="chatbot-translations" type="application/json">
{
    "csrfToken": "{{ csrf_token }}",
    "translations": {
        "messageRequired": "{{ '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.'|trans }}",
        "messageTooLong": "{{ '–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–ª–∏–Ω–Ω–µ–µ 1000 —Å–∏–º–≤–æ–ª–æ–≤.'|trans }}",
        "fileTooLarge": "{{ '–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 5MB.'|trans }}",
        "invalidFileType": "{{ '–†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã JPG, PNG –∏ PDF.'|trans }}",
        "connectionError": "{{ '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.'|trans }}",
        "sendError": "{{ '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è.'|trans }}",
        "sending": "{{ '–û—Ç–ø—Ä–∞–≤–∫–∞...'|trans }}",
        "send": "{{ '–û—Ç–ø—Ä–∞–≤–∏—Ç—å'|trans }}",
        "microphoneError": "{{ '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É.'|trans }}",
        "playbackError": "{{ '–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–∞–ø–∏—Å—å.'|trans }}",
        "stopRecording": "{{ '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å'|trans }}",
        "startRecording": "{{ '–ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'|trans }}",
        "welcomeMessage": "{{ '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ó–∞–¥–∞–π—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å...'|trans }}"
    }
}
</script>
{% endblock %}

{% block extra_js %}
    {% compress js %}
    <script src="{% static 'js/chatbot.js' %}"></script>
    {% endcompress %}
{% endblock %}