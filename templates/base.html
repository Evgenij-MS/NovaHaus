{% load static i18n compress %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#005B99">

    <!-- Title & Meta -->
    <title>{% block title %}{% trans "NovaHaus – Ваш надёжный партнёр по ремонту" %}{% endblock %}</title>
    <meta name="description" content="{% block description %}{% trans "Профессиональный ремонт в Кёльне и Гамбурге с использованием экологичных материалов." %}{% endblock %}">
    <meta name="keywords" content="{% block keywords %}{% trans "ремонт, Кёльн, Гамбург, экологичность, NovaHaus, ремонт квартир, ремонт офисов, эко-материалы" %}{% endblock %}">
    <meta name="author" content="NovaHaus">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:title" content="{% trans "NovaHaus – Эксперты по ремонту" %}">
    <meta property="og:description" content="{% trans "Преображаем пространства с качеством и экологичностью в Кёльне и Гамбурге." %}">
    <meta property="og:image" content="{% static 'images/logo.png' %}">
    <meta property="og:url" content="{% if request.get_host == 'novahaus-hamburg.de' or request.get_host == 'www.novahaus-hamburg.de' %}https://www.novahaus-hamburg.de{% else %}https://www.novahaus-koeln.de{% endif %}">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="{{ LANGUAGE_CODE }}">

    <!-- Favicon Suite -->
    <link rel="shortcut icon" href="{% static 'images/favicon/favicon.ico' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon/favicon-16x16.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'images/favicon/favicon-96x96.png' %}">
    <link rel="icon" type="image/svg+xml" href="{% static 'images/favicon/favicon.svg' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon/apple-touch-icon.png' %}">

    <!-- PWA Manifest -->
    <link rel="manifest" href="{% static 'manifest.json' %}">

    <!-- CSS -->
    {% compress css %}
    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/global.css' %}">
    <link rel="stylesheet" href="{% static 'css/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/buttons.css' %}">
    <link rel="stylesheet" href="{% static 'css/forms.css' %}">
    <link rel="stylesheet" href="{% static 'css/cards.css' %}">
    <link rel="stylesheet" href="{% static 'css/slider.css' %}">
    <link rel="stylesheet" href="{% static 'css/footer.css' %}">
    <link rel="stylesheet" href="{% static 'css/chatbot.css' %}">
    <link rel="stylesheet" href="{% static 'css/pannellum.css' %}">
    <link rel="stylesheet" href="{% static 'css/visualization.css' %}">
    <link rel="stylesheet" href="{% static 'css/media-queries.css' %}">
    <link rel="stylesheet" href="{% static 'css/partner.css' %}">
    <link rel="stylesheet" href="{% static 'css/calculator.css' %}">
    {% endcompress %}

    <!-- Google Analytics -->
    {% if request.get_host == "novahaus-hamburg.de" or request.get_host == "www.novahaus-hamburg.de" %}
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-19RQG7TDMC"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-19RQG7TDMC', {
            'linker': {
                'domains': ['novahaus-hamburg.de', 'novahaus-koeln.de']
            }
        });
    </script>
    {% elif request.get_host == "novahaus-koeln.de" or request.get_host == "www.novahaus-koeln.de" %}
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BS4J4PD0WF"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-BS4J4PD0WF', {
            'linker': {
                'domains': ['novahaus-hamburg.de', 'novahaus-koeln.de']
            }
        });
    </script>
    {% endif %}

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "NovaHaus",
        "image": "{% static 'images/logo.png' %}",
        "description": "{% trans "Ремонтная компания в Кёльне и Гамбурге. Квартиры, офисы, фасады." %}",
        "address": [
            {
                "@type": "PostalAddress",
                "streetAddress": "Musterstraße 123",
                "addressLocality": "{% trans "Кёльн" %}",
                "postalCode": "50667",
                "addressCountry": "DE"
            },
            {
                "@type": "PostalAddress",
                "streetAddress": "Beispielweg 456",
                "addressLocality": "{% trans "Гамбург" %}",
                "postalCode": "20354",
                "addressCountry": "DE"
            }
        ],
        "telephone": "+49 155 100 718 48",
        "email": "info@novahaus.de",
        "url": "{% if request.get_host == 'novahaus-hamburg.de' or request.get_host == 'www.novahaus-hamburg.de' %}https://www.novahaus-hamburg.de{% else %}https://www.novahaus-koeln.de{% endif %}",
        "sameAs": [
            "https://www.instagram.com/novahaus",
            "https://www.facebook.com/novahaus",
            "https://www.linkedin.com/company/novahaus"
        ],
        "openingHours": "Mo-Fr 08:00-18:00",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "120"
        }
    }
    </script>
</head>
<body>
    {% block extra_context %}
        {% url 'home' as url_home %}
        {% url 'services' as url_services %}
        {% url 'portfolio' as url_portfolio %}
        {% url 'blog' as url_blog %}
        {% url 'about' as url_about %}
        {% url 'contact' as url_contact %}
        {% url 'register_partner' as url_register_partner %}
    {% endblock %}

    {% include 'includes/header.html' %}

    <main>
        {% block content %}
        {% endblock %}
    </main>

    {% include 'includes/footer.html' %}

    <!-- Interactive Elements -->
    <button id="theme-toggle" class="theme-toggle-btn" aria-label="{% trans 'Переключить тему' %}">
        <i class="fas fa-moon"></i>
        <span class="theme-toggle-text">{% trans "Тёмная тема" %}</span>
    </button>

    <div id="chatbot" class="chatbot-container" aria-label="{% trans 'Чат-поддержка' %}">
        <iframe src="{% url 'chatbot' %}" title="{% trans 'Чат-бот NovaHaus' %}"></iframe>
    </div>

    <!-- JS -->
    <script src="{% static 'js/main.js' %}" defer></script>
    <script src="{% static 'js/slider.js' %}" defer></script>
    <script src="{% static 'js/language.js' %}" defer></script>
    <script src="{% static 'js/chatbot.js' %}" defer></script>
    <script src="{% static 'js/pannellum.js' %}" defer></script>
    <script src="{% static 'js/pannellum-custom.js' %}" defer></script>
    <script src="{% static 'js/visualization.js' %}" defer></script>
    <script src="{% static 'js/calculator.js' %}" defer></script>



    <!-- Breadcrumb -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "{% trans 'Home' %}",
                "item": "{% url 'home' %}"
            }
            {% block breadcrumb %}{% endblock %}
        ]
    }
    </script>

    <!-- Structured Data for Current Page -->
    {% block structured_data %}{% endblock %}
</body>
</html>